(()=>{"use strict";var e=document.querySelector(".container"),t=e.querySelector(".profile__edit-button"),n=e.querySelector(".profile__add-button"),r=(e.querySelector(".profile__avatar"),e.querySelector(".profile__change-button")),o=(document.querySelectorAll(".popup__close-button"),document.querySelector(".popup__close-button_profile"),document.querySelector(".popup__close-button_avatar"),document.querySelector(".popup__close-button_card"),document.querySelector(".popup__close-button_image"),document.querySelector("#element").content.querySelectorAll(".element__img"),document.querySelector(".popup_edit-profile")),i=document.querySelector(".popup_edit-avatar"),a=document.querySelector(".popup_add-card"),u=document.querySelector(".popup_open-image"),l=(u.querySelector(".popup__img"),u.querySelector(".popup__img-title"),document.querySelectorAll(".popup"),o.querySelector(".popup__input_name"),o.querySelector(".popup__input_about"),a.querySelector(".popup__input_title"),a.querySelector(".popup__input_link"),i.querySelector(".popup__input_link-avatar"),e.querySelector(".profile__title"),e.querySelector(".profile__subtitle"),e.querySelector(".elements"),document.querySelector("#submitButtonMesto")),c=document.querySelector("#submitButtonProfile"),s=document.querySelector("#submitButtonAvatar"),f={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function h(e,t){d(e,t),t.add(e)}function v(e,t,n){d(e,t),t.set(e,n)}function d(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function b(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_(e,t,"get"))}function w(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_(e,t,"set"),n),n}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var S=new WeakMap,g=new WeakMap,k=new WeakMap,P=new WeakMap,E=new WeakMap,j=new WeakMap,q=new WeakMap,O=new WeakMap,C=new WeakMap,T=new WeakMap,L=new WeakSet,W=new WeakSet,M=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,W),h(this,L),v(this,S,{writable:!0,value:void 0}),v(this,g,{writable:!0,value:void 0}),v(this,k,{writable:!0,value:void 0}),v(this,P,{writable:!0,value:void 0}),v(this,E,{writable:!0,value:void 0}),v(this,j,{writable:!0,value:void 0}),v(this,q,{writable:!0,value:void 0}),v(this,O,{writable:!0,value:void 0}),v(this,C,{writable:!0,value:void 0}),v(this,T,{writable:!0,value:void 0}),w(this,S,t.name),w(this,g,t.link),w(this,k,document.querySelector(n)),w(this,P,t.likes),w(this,j,t.owner._id),w(this,q,i),w(this,O,a),w(this,C,o),w(this,T,r)}var t,n;return t=e,(n=[{key:"changeLike",value:function(e){var t=this,n=b(this,E).querySelector(".element__like-button"),r=b(this,E).querySelector(".element__like-amount");0!=e.length?e.forEach((function(e){e._id===b(t,T)?n.classList.add("element__like-button_active"):n.classList.remove("element__like-button_active")})):n.classList.remove("element__like-button_active"),r.textContent=e.length}},{key:"createCard",value:function(){var e=b(this,k).content.querySelector(".element").cloneNode(!0),t=e.querySelector(".element__like-amount"),n=e.querySelector(".element__delete-button");e.querySelector(".element__title").textContent=b(this,S),t.textContent=b(this,P).length;var r=e.querySelector(".element__img");return r.setAttribute("src",b(this,g)),r.setAttribute("alt","Изображение ".concat(b(this,S))),w(this,E,e),b(this,T)!=b(this,j)&&n.classList.remove("element__delete-button_activate"),this.changeLike(b(this,P)),m(this,W,A).call(this),b(this,E)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(){return b(this,E).querySelector(".element__like-button").classList.contains("element__like-button_active")}function A(){var e=this,t=b(this,E).querySelector(".element__delete-button"),n=b(this,E).querySelector(".element__like-button"),r=b(this,E).querySelector(".element__img");n.addEventListener("click",(function(){b(e,q).call(e,m(e,L,I).call(e),e)})),t.addEventListener("click",(function(){b(e,O).call(e,b(e,E))})),r.addEventListener("click",(function(){b(e,C).call(e,b(e,g),b(e,S))}))}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}function U(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function V(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function B(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var z=new WeakMap,H=new WeakMap,N=new WeakMap,J=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,z,{writable:!0,value:void 0}),U(this,H,{writable:!0,value:void 0}),U(this,N,{writable:!0,value:void 0}),B(this,H,r),B(this,N,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;V(this,z).forEach((function(t){return V(e,H).call(e,t,e._id)}))}},{key:"addItemPrepend",value:function(e){V(this,N).prepend(e)}},{key:"addItemAppend",value:function(e){V(this,N).append(e)}},{key:"setItem",value:function(e,t){B(this,z,e),this._id=t}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.buttonClose=this.popup.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose.bind(this))}},{key:"closePopup",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose.bind(this))}},{key:"setEventListeners",value:function(){this.popup.addEventListener("click",this._handleOverlayClose.bind(this)),this.buttonClose.addEventListener("click",this.closePopup.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"!==e.key&&"Esc"!==e.key||this.closePopup()}},{key:"_handleOverlayClose",value:function(e){e.target.classList.contains("popup")&&this.closePopup(e.target)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===K(o)?o:String(o)),r)}var o}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},X.apply(this,arguments)}function Y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function ee(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=te(r);if(o){var n=te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ee(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).image=t.popup.querySelector(".popup__img"),t.imageTitle=t.popup.querySelector(".popup__img-title"),t}return t=a,(n=[{key:"openPopup",value:function(e){var t=e.src,n=e.alt;X(te(a.prototype),"openPopup",this).call(this),this.image.setAttribute("src",t),this.image.setAttribute("alt","Изображение ".concat(n)),this.imageTitle.textContent=n}}])&&Q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===re(o)?o:String(o)),r)}var o}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ae(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ie.apply(this,arguments)}function ae(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(r);if(o){var n=ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return le(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e)).formHandler=t,n.form=n.popup.querySelector(".popup__form"),n._inputList=n.form.querySelectorAll(".popup__input"),n.initialValues=null,n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;ie(ce(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.formHandler(e._getInputValues())}))}},{key:"openPopup",value:function(){ie(ce(a.prototype),"openPopup",this).call(this),this.initialValues=this._getInputValues()}},{key:"closePopup",value:function(){var e=this;ie(ce(a.prototype),"closePopup",this).call(this),this._inputList.forEach((function(t){return t.value=e.initialValues[t.name]}))}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}}])&&oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===fe(o)?o:String(o)),r)}var o}function ye(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function he(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,de(e,t,"get"))}function ve(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,de(e,t,"set"),n),n}function de(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var me=new WeakMap,be=new WeakMap,we=new WeakMap,_e=new WeakMap,Se=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,me,{writable:!0,value:void 0}),ye(this,be,{writable:!0,value:void 0}),ye(this,we,{writable:!0,value:void 0}),ye(this,_e,{writable:!0,value:void 0}),ve(this,me,document.querySelector(t.nameElementSelector)),ve(this,be,document.querySelector(t.descElementSelector)),ve(this,we,document.querySelector(t.avatarElementSelector)),ve(this,_e,n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return he(this,_e).call(this)}},{key:"setUserInfo",value:function(e){he(this,me).textContent=e.name,he(this,be).textContent=e.about,he(this,we).src=e.avatar}}])&&pe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ge(o)?o:String(o)),r)}var o}function Pe(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ee(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qe(e,t,"get"))}function je(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,qe(e,t,"set"),n),n}function qe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Oe=new WeakMap,Ce=new WeakMap,Te=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pe(this,Oe,{writable:!0,value:void 0}),Pe(this,Ce,{writable:!0,value:void 0}),je(this,Oe,n),je(this,Ce,r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(Ee(this,Oe),"/users/me"),{headers:Ee(this,Ce)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(Ee(this,Oe),"/cards"),{headers:Ee(this,Ce)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"patchProfileInfo",value:function(e){var t=e.name,n=e.about;return console.log(n),fetch("".concat(Ee(this,Oe),"/users/me"),{method:"PATCH",headers:Ee(this,Ce),body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"postCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(Ee(this,Oe),"/cards"),{method:"POST",headers:Ee(this,Ce),body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteUserCard",value:function(e){return fetch("".concat(Ee(this,Oe),"/cards/").concat(e),{method:"DELETE",headers:Ee(this,Ce)})}},{key:"putLiketoCard",value:function(e){return fetch("".concat(Ee(this,Oe),"/cards/likes/").concat(e),{method:"PUT",headers:Ee(this,Ce)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(Ee(this,Oe),"/cards/likes/").concat(e),{method:"DELETE",headers:Ee(this,Ce)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"changeUserAvatar",value:function(e){return fetch("".concat(Ee(this,Oe),"/users/me/avatar"),{method:"PATCH",headers:Ee(this,Ce),body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Le(o)?o:String(o)),r)}var o}function Me(e,t){Ae(e,t),t.add(e)}function Ie(e,t,n){Ae(e,t),t.set(e,n)}function Ae(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Re(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ve(e,t,"get"))}function Ue(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ve(e,t,"set"),n),n}function Ve(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Be=new WeakMap,De=new WeakMap,ze=new WeakMap,He=new WeakMap,Ne=new WeakMap,Je=new WeakMap,$e=new WeakSet,Fe=new WeakSet,Ge=new WeakSet,Ke=new WeakSet,Qe=new WeakSet,Xe=new WeakSet,Ye=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Me(this,Xe),Me(this,Qe),Me(this,Ke),Me(this,Ge),Me(this,Fe),Me(this,$e),Ie(this,Be,{writable:!0,value:void 0}),Ie(this,De,{writable:!0,value:void 0}),Ie(this,ze,{writable:!0,value:void 0}),Ie(this,He,{writable:!0,value:void 0}),Ie(this,Ne,{writable:!0,value:void 0}),Ie(this,Je,{writable:!0,value:void 0}),Ue(this,Be,t.inputSelector),Ue(this,De,t.submitButtonSelector),Ue(this,ze,t.inactiveButtonClass),Ue(this,He,t.inputErrorClass),Ue(this,Ne,t.errorClass),Ue(this,Je,document.querySelector(n))}var t,n;return t=e,(n=[{key:"reset",value:function(){var e=this,t=Re(this,Je).querySelector(".popup__form"),n=Array.from(t.querySelectorAll(Re(this,Be))),r=t.querySelector(Re(this,De));xe(this,Qe,rt).call(this,n,r),n.forEach((function(t){xe(e,Fe,et).call(e,t)}))}},{key:"enableValidation",value:function(){xe(this,Xe,ot).call(this)}}])&&We(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ze(e,t){var n=Re(this,Je).querySelector(".".concat(e.id,"-error"));e.classList.add(Re(this,He)),n.textContent=t,n.classList.add(Re(this,Ne))}function et(e){var t=Re(this,Je).querySelector(".".concat(e.id,"-error"));e.classList.remove(Re(this,He)),t.classList.remove(Re(this,Ne)),t.textContent=""}function tt(e){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity(""),e.validity.valid?xe(this,Fe,et).call(this,e):xe(this,$e,Ze).call(this,e,e.validationMessage)}function nt(e){return e.some((function(e){return!e.validity.valid}))}function rt(e,t){xe(this,Ke,nt).call(this,e)?(t.disabled=!0,t.classList.add(Re(this,ze))):(t.disabled=!1,t.classList.remove(Re(this,ze)))}function ot(){var e=this,t=Array.from(Re(this,Je).querySelectorAll(Re(this,Be))),n=Re(this,Je).querySelector(Re(this,De));xe(this,Qe,rt).call(this,t,n),t.forEach((function(r){r.addEventListener("input",(function(){xe(e,Ge,tt).call(e,r),xe(e,Qe,rt).call(e,t,n)}))}))}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var at=new Te({baseUrl:"https://nomoreparties.co/v1/plus-cohort-17",headers:{authorization:"d23797db-84d4-4701-b645-1174990f5c2b","Content-Type":"application/json"}});function ut(e,t){var n=new M(e,"#element",t,ft,(function(t,n){t?at.deleteLike(e._id).then((function(e){n.changeLike(e.likes)})).catch((function(e){console.log(e)})):at.putLiketoCard(e._id).then((function(e){n.changeLike(e.likes)})).catch((function(e){console.log(e)}))}),(function(){at.deleteUserCard(e._id).then((function(){n.remove()})).catch((function(e){console.log(e)}))})).createCard();return n}var lt=new J({renderer:function(e,t){lt.addItemAppend(ut(e,t))}},".elements"),ct=new Se({nameElementSelector:".profile__title",descElementSelector:".profile__subtitle",avatarElementSelector:".profile__avatar"},at.getUserInfo.bind(at));Promise.all([ct.getUserInfo(),at.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ct.setUserInfo(o),lt.setItem(i,o._id),lt.renderItems()})).catch((function(e){console.log(e)}));var st=new ne(".popup_open-image");function ft(e,t){st.openPopup({src:e,alt:t})}st.setEventListeners();var pt=new se(".popup_edit-profile",(function(e){c.textContent="Сохранение...",at.patchProfileInfo(e).then((function(e){ct.setUserInfo(e),pt.closePopup()})).catch((function(e){console.log(e)})).finally((function(){c.textContent="Сохранить"}))}));pt.setEventListeners();var yt=new se(".popup_edit-avatar",(function(e){s.textContent="Сохранение...",at.changeUserAvatar(e).then((function(e){ct.setUserInfo(e.avatar),yt.closePopup()})).catch((function(e){console.log(e)})).finally((function(){s.textContent="Сохранить"}))}));yt.setEventListeners();var ht=new se(".popup_add-card",(function(e){l.textContent="Создание...",at.postCard(e).then((function(e){lt.addItemPrepend(ut(e,e.owner._id)),ht.closePopup()})).catch((function(e){console.log(e)})).finally((function(){l.textContent="Создать"}))}));ht.setEventListeners(),t.addEventListener("click",(function(){pt.openPopup(),vt.reset()})),r.addEventListener("click",(function(){yt.openPopup(),dt.reset()})),n.addEventListener("click",(function(){ht.openPopup(),mt.reset()}));var vt=new Ye(f,".popup_edit-profile");vt.enableValidation();var dt=new Ye(f,".popup_edit-avatar");dt.enableValidation();var mt=new Ye(f,".popup_add-card");mt.enableValidation()})();